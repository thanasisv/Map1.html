<script>
  function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 0, lng: 0},
      zoom: 2
    });

    var searchBox = new google.maps.places.SearchBox(document.getElementById('search-box'));
    map.controls[google.maps.ControlPosition.TOP_LEFT].push(document.getElementById('search-box'));

    var kmlLayer = new google.maps.KmlLayer({
      url: https://drive.google.com/file/d/1FlkQiVsFSP6bCRWxqJ578eDymuSRKR7p/view?usp=drivesdk,
      map: map,
      suppressInfoWindows: false
    });

    // Προσθήκη event listener για αναζήτηση όταν αλλάξει το περιεχόμενο του κουτιού αναζήτησης
    searchBox.addListener('places_changed', function() {
      var places = searchBox.getPlaces();

      if (places.length == 0) {
        return;
      }

      // Φιλτράρισμα με βάση το επιλεγμένο μέρος και εμφάνιση των αποτελεσμάτων στο χάρτη
      var bounds = new google.maps.LatLngBounds();
      places.forEach(function(place) {
        if (place.geometry.viewport) {
          bounds.union(place.geometry.viewport);
        } else {
          bounds.extend(place.geometry.location);
        }
      });
      map.fitBounds(bounds);
    });
  }
</script>
